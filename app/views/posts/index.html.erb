<p id="notice"><%= notice %></p>

<h1>Posts</h1>

<h1>Here you can search</h1>
<%= search_form_for @search do |f| %>
  <div class="field">
    <%= f.label :text_cont, "Text contains"%>
    <%= f.text_field :text_cont%>
  </div>
  <div class="actions"><%= f.submit "Search" %></div>
<% end %>

<table>
  <thead>
    <tr>
      <th>Show</th>
      <th>Edit</th>
      <th>Destroy</th>
      <th>Post</th>
      <th>Date</th>
      <th>Tags</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @posts.each do |post| %>
      <tr>
      <td><%= link_to 'Show', post %></td>
        <td><%= link_to 'Edit', edit_post_path(post) %></td>
        <td><%= link_to 'Destroy', post, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        <td><a href="/posts/<%=post.id%>"><%= post.text %></a></td>
        <td><%= post.date %></td>
        <% post.tag_list.each do |tag| %>
         <td><a href='/tags/<%= tag %>'> <%= tag%></a></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Post', new_post_path %>

<form>
  <select name='year' onchange='this.form.submit()'>
  <option>Select a year</option>
  <p><% @unique_year.each do |year|%></p>
    <option><%= year %></option>
    <% end %>
  </select>
  <noscript><input type="submit" value="Submit"></noscript>
</form>

<% @posts_by_year.each do |post_by_year| %>
<p>
  <a href="/posts/<%=post_by_year.id%>"><%= post_by_year.text %></a>
  <%= post_by_year.date %>
  <% post_by_year.tag_list.each do |tags| %>
    <%= tags%>
  <% end %>
</p>
<% end %>
